<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å‡æ³•å¤§æŒ‘æˆ˜ï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }
        input[type="number"]:focus {
            outline: 2px solid #60a5fa; /* Tailwind blue-400 */
            outline-offset: 2px;
        }
        .btn-primary {
            @apply bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 ease-in-out transform hover:scale-105;
        }
        .btn-success {
            @apply bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 ease-in-out transform hover:scale-105;
        }
        .btn-warning {
            @apply bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 ease-in-out transform hover:scale-105;
        }
        .feedback-animation {
            animation: fadeInScale 0.5s ease-out;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* è½®ç›˜æŒ‡é’ˆæ ·å¼ */
        .wheel-pointer {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #facc15; /* Tailwind yellow-400 */
            position: absolute;
            top: -10px; /* è°ƒæ•´æŒ‡é’ˆä½ç½®ä½¿å…¶åœ¨è½®ç›˜æ­£ä¸Šæ–¹çªå‡ºä¸€ç‚¹ */
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        /* è½®ç›˜æœ¬èº«æ ·å¼ */
        #prize-wheel {
            transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1); /* å¹³æ»‘çš„ç¼“åŠ¨æ•ˆæœ */
            /* background-image: url('YOUR_OPTIONAL_WHEEL_IMAGE_URL'); */ /* æ‚¨å¯ä»¥æ›¿æ¢ä¸ºçœŸå®çš„è½®ç›˜å›¾ç‰‡ */
            background-size: cover;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-200 via-indigo-200 to-purple-300 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-lg text-center">
        <h1 class="text-3xl sm:text-4xl font-bold text-purple-600 mb-4">
            åŠ å‡æ³•å¤§æŒ‘æˆ˜ï¼ğŸš€
        </h1>

        <div class="my-4 text-xl">
            ğŸ’° æ¸¸æˆå¸: <span id="game-coins-display" class="font-bold text-yellow-500">0</span>
        </div>

        <div id="game-area">
            <div class="mb-6 text-gray-700">
                <p class="text-lg">
                    å½“å‰å…³å¡: <span id="current-level" class="font-semibold text-xl text-indigo-600">1</span>
                    (<span id="level-description" class="font-semibold text-indigo-500">20ä»¥å†…åŠ å‡æ³•</span>)
                </p>
                <p class="text-md mt-1">
                    æœ¬å…³è¿›åº¦: <span id="correct-answers-count" class="font-semibold text-green-600">0</span> /
                    <span id="target-answers-count" class="font-semibold text-green-600">7</span>
                </p>
            </div>

            <div id="problem-section" class="my-8 p-6 bg-indigo-50 rounded-lg shadow">
                <span id="num1" class="text-5xl sm:text-6xl font-bold text-blue-600"></span>
                <span id="operator" class="text-5xl sm:text-6xl font-bold text-red-500 mx-2 sm:mx-4"></span>
                <span id="num2" class="text-5xl sm:text-6xl font-bold text-blue-600"></span>
                <span class="text-5xl sm:text-6xl font-bold text-gray-700 mx-2 sm:mx-4">=</span>
                <span class="text-5xl sm:text-6xl font-bold text-gray-700">?</span>
            </div>

            <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <input type="number" id="answer-input" inputmode="numeric" pattern="[0-9]*"
                       class="text-2xl p-3 border-2 border-gray-300 rounded-lg w-full sm:w-48 text-center shadow-sm focus:border-blue-500 focus:ring-blue-500 transition-colors"
                       placeholder="è¾“å…¥ç­”æ¡ˆ">
                <button id="submit-button" class="btn-primary w-full sm:w-auto">
                    æäº¤ç­”æ¡ˆ
                </button>
            </div>

            <div id="feedback" class="mt-6 text-xl font-semibold min-h-[30px]"></div>
        </div>

        <div id="level-complete" class="hidden mt-8">
            <h2 class="text-3xl font-bold text-green-500 mb-4">ğŸ‰ æ­å–œï¼ä½ å·²å®Œæˆæœ¬å…³ï¼ğŸ‰</h2>
            <button id="next-level-button" class="btn-success">
                æŒ‘æˆ˜ä¸‹ä¸€å…³
            </button>
        </div>

        <div id="game-complete" class="hidden mt-8">
            <h2 class="text-3xl font-bold text-yellow-500 mb-4">ğŸ† å¤ªæ£’äº†ï¼ä½ å·²å®Œæˆæ‰€æœ‰æŒ‘æˆ˜ï¼ğŸ†</h2>
            <button id="restart-button" class="btn-warning">
                é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>

    <div id="prize-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-gradient-to-br from-purple-400 via-pink-400 to-red-400 p-6 sm:p-8 rounded-xl shadow-2xl text-white w-full max-w-md text-center">
            <h2 class="text-3xl font-bold mb-6">å¹¸è¿å¤§è½®ç›˜! ğŸ¡</h2>
            <div class="relative w-64 h-64 sm:w-80 sm:h-80 mx-auto mb-6">
                <div class="wheel-pointer"></div>
                <div id="prize-wheel" class="w-full h-full rounded-full border-4 border-white shadow-lg bg-gray-200 flex items-center justify-center overflow-hidden">
                    <img src="https://placehold.co/300x300/E2E8F0/4A5568?text=%E8%BD%AE%E7%9B%98&font=sans" alt="è½®ç›˜" class="w-full h-full object-cover rounded-full">
                </div>
            </div>
            <div id="prize-result" class="text-xl font-semibold my-4 min-h-[30px]">ç‚¹å‡»â€œè½¬åŠ¨â€å¼€å§‹æŠ½å¥–ï¼</div>
            <button id="spin-button" class="btn-success w-full mb-3">è½¬åŠ¨!</button>
            <button id="close-prize-modal-button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg w-full">å…³é—­</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // HTML å…ƒç´ è·å–
            const num1El = document.getElementById('num1');
            const operatorEl = document.getElementById('operator');
            const num2El = document.getElementById('num2');
            const answerInput = document.getElementById('answer-input');
            const submitButton = document.getElementById('submit-button');
            const feedbackEl = document.getElementById('feedback');
            const currentLevelEl = document.getElementById('current-level');
            const levelDescriptionEl = document.getElementById('level-description');
            const correctAnswersCountEl = document.getElementById('correct-answers-count');
            const targetAnswersCountEl = document.getElementById('target-answers-count');
            const gameCoinsDisplayEl = document.getElementById('game-coins-display');

            const gameAreaEl = document.getElementById('game-area');
            const levelCompleteEl = document.getElementById('level-complete');
            const nextLevelButton = document.getElementById('next-level-button');
            const gameCompleteEl = document.getElementById('game-complete');
            const restartButton = document.getElementById('restart-button');

            // è½®ç›˜æŠ½å¥–ç›¸å…³å…ƒç´ 
            const prizeModalEl = document.getElementById('prize-modal');
            const prizeWheelEl = document.getElementById('prize-wheel');
            const spinButtonEl = document.getElementById('spin-button');
            const prizeResultEl = document.getElementById('prize-result');
            const closePrizeModalButtonEl = document.getElementById('close-prize-modal-button');

            // å…³å¡å®šä¹‰ (ä»20ä»¥å†…å¼€å§‹)
            const levels = [
                { maxNum: 20, description: "20ä»¥å†…åŠ å‡æ³•", target: 7 },   // ç´¢å¼• 0 (ç¬¬1å…³)
                { maxNum: 50, description: "50ä»¥å†…åŠ å‡æ³•", target: 8 },   // ç´¢å¼• 1 (ç¬¬2å…³)
                { maxNum: 100, description: "100ä»¥å†…åŠ å‡æ³•", target: 10 }, // ç´¢å¼• 2 (ç¬¬3å…³)
                { maxNum: 150, description: "150ä»¥å†…åŠ å‡æ³•", target: 10 }, // ç´¢å¼• 3 (ç¬¬4å…³)
                { maxNum: 200, description: "200ä»¥å†…åŠ å‡æ³•", target: 12 }, // ç´¢å¼• 4 (ç¬¬5å…³ - é‡Œç¨‹ç¢‘)
                { maxNum: 250, description: "250ä»¥å†…åŠ å‡æ³•", target: 12 }, // ç´¢å¼• 5 (ç¬¬6å…³)
                { maxNum: 300, description: "300ä»¥å†…åŠ å‡æ³•", target: 15 }, // ç´¢å¼• 6 (ç¬¬7å…³)
                { maxNum: 400, description: "400ä»¥å†…åŠ å‡æ³•", target: 15 }, // ç´¢å¼• 7 (ç¬¬8å…³)
                { maxNum: 500, description: "500ä»¥å†…åŠ å‡æ³•", target: 15 }, // ç´¢å¼• 8 (ç¬¬9å…³)
                { maxNum: 700, description: "æ›´é«˜éš¾åº¦æŒ‘æˆ˜", target: 20 }  // ç´¢å¼• 9 (ç¬¬10å…³ - é‡Œç¨‹ç¢‘)
            ];

            // å¥–å“å®šä¹‰ (æ€»å…±10ä¸ªæ§½ä½)
            const prizes = [
                { text: "åæšæ¸¸æˆå¸", coins: 10, slots: 1, color: 'gold' },       // 1ä¸ªæ§½ä½
                { text: "äº”æšæ¸¸æˆå¸", coins: 5, slots: 2, color: 'silver' },      // 2ä¸ªæ§½ä½
                { text: "ä¸€æšæ¸¸æˆå¸", coins: 1, slots: 3, color: 'bronze' },     // 3ä¸ªæ§½ä½
                { text: "å†æ¥å†å‰", coins: 0, slots: 4, color: 'lightgray' }    // 4ä¸ªæ§½ä½
            ];
            let wheelSlotPrizes = []; // ç”¨äºå®é™…æŠ½å¥–çš„æ§½ä½åˆ—è¡¨

            let currentLevelIndex = 0;
            let num1, num2, operator, correctAnswer;
            let correctAnswersInLevel = 0;
            let gameCoins = 0;
            let completedLevelsCount = 0; // å·²å®Œæˆçš„å…³å¡æ•°ï¼Œç”¨äºé‡Œç¨‹ç¢‘åˆ¤æ–­

            // åˆå§‹åŒ–è½®ç›˜æ§½ä½å¥–å“åˆ—è¡¨
            function setupWheelSlots() {
                wheelSlotPrizes = [];
                prizes.forEach(prize => {
                    for (let i = 0; i < prize.slots; i++) {
                        wheelSlotPrizes.push(prize);
                    }
                });
                // å¯é€‰ï¼šæ‰“ä¹±wheelSlotPrizesæ•°ç»„ï¼Œä½¿æ¯æ¬¡è½®ç›˜ä¸Šå¥–å“åˆ†å¸ƒçœ‹èµ·æ¥éšæœº
                // wheelSlotPrizes.sort(() => Math.random() - 0.5);
            }

            // æ›´æ–°æ¸¸æˆå¸æ˜¾ç¤º
            function updateGameCoinsDisplay() {
                gameCoinsDisplayEl.textContent = gameCoins;
            }

            // ç”Ÿæˆé¢˜ç›®
            function generateProblem() {
                const level = levels[currentLevelIndex];
                const maxNumber = level.maxNum;
                operator = Math.random() < 0.5 ? '+' : '-';
                num1 = Math.floor(Math.random() * (maxNumber + 1));
                num2 = Math.floor(Math.random() * (maxNumber + 1));

                if (operator === '-') {
                    if (num1 < num2) { [num1, num2] = [num2, num1]; }
                    if (maxNumber <= 20 && num1 === 0 && num2 === 0) { // è°ƒæ•´äº†è¿™é‡Œçš„maxNumberåˆ¤æ–­
                        num1 = Math.floor(Math.random() * maxNumber) + 1;
                        num2 = Math.floor(Math.random() * num1);
                    }
                }
                correctAnswer = (operator === '+') ? (num1 + num2) : (num1 - num2);
                num1El.textContent = num1;
                operatorEl.textContent = operator;
                num2El.textContent = num2;
                updateUIState();
            }

            // æ›´æ–°ç•Œé¢çŠ¶æ€
            function updateUIState() {
                const level = levels[currentLevelIndex];
                currentLevelEl.textContent = currentLevelIndex + 1; // å…³å¡ä»1å¼€å§‹æ˜¾ç¤º
                levelDescriptionEl.textContent = level.description;
                correctAnswersCountEl.textContent = correctAnswersInLevel;
                targetAnswersCountEl.textContent = level.target;
                feedbackEl.textContent = '';
                feedbackEl.className = 'mt-6 text-xl font-semibold min-h-[30px]';
                answerInput.value = '';
                answerInput.focus();
            }

            // æ£€æŸ¥ç­”æ¡ˆ
            function checkAnswer() {
                const userAnswerText = answerInput.value.trim();
                if (userAnswerText === '') {
                    feedbackEl.textContent = "è¯·è¾“å…¥ç­”æ¡ˆå“¦ï¼âœï¸";
                    feedbackEl.className = 'mt-6 text-xl font-semibold min-h-[30px] text-yellow-600 feedback-animation';
                    return;
                }
                const userAnswer = parseInt(userAnswerText);
                if (isNaN(userAnswer)) {
                    feedbackEl.textContent = "è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ï¼ğŸ”¢";
                    feedbackEl.className = 'mt-6 text-xl font-semibold min-h-[30px] text-red-500 feedback-animation';
                    return;
                }

                if (userAnswer === correctAnswer) {
                    feedbackEl.textContent = "ç­”å¯¹å•¦ï¼ä½ çœŸæ£’ï¼ğŸ¥³";
                    feedbackEl.className = 'mt-6 text-xl font-semibold min-h-[30px] text-green-500 feedback-animation';
                    correctAnswersInLevel++;
                    correctAnswersCountEl.textContent = correctAnswersInLevel; // å®æ—¶æ›´æ–°ç­”å¯¹é¢˜æ•°

                    if (correctAnswersInLevel >= levels[currentLevelIndex].target) {
                        completedLevelsCount++; // å…³å¡å®Œæˆï¼Œè®¡æ•°å™¨å¢åŠ 
                        setTimeout(() => showLevelCompleteScreen(true), 1200);
                    } else {
                        setTimeout(generateProblem, 1200);
                    }
                } else {
                    feedbackEl.textContent = `ä¸å¯¹å“¦ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ ${correctAnswer}ã€‚åŠ æ²¹ï¼ï¿½`;
                    feedbackEl.className = 'mt-6 text-xl font-semibold min-h-[30px] text-red-500 feedback-animation';
                    setTimeout(generateProblem, 2500);
                }
            }

            // æ˜¾ç¤ºå…³å¡å®Œæˆç•Œé¢
            function showLevelCompleteScreen(levelWasBeaten) {
                gameAreaEl.classList.add('hidden');
                if (levelWasBeaten && currentLevelIndex >= levels.length - 1) {
                    gameCompleteEl.classList.remove('hidden');
                } else if (levelWasBeaten) {
                    levelCompleteEl.classList.remove('hidden');
                }
            }

            // è¿›å…¥ä¸‹ä¸€å…³çš„é€»è¾‘ï¼ˆç‚¹å‡»â€œæŒ‘æˆ˜ä¸‹ä¸€å…³â€æŒ‰é’®åï¼‰
            function goToNextLevel() {
                levelCompleteEl.classList.add('hidden'); // éšè—â€œå…³å¡å®Œæˆâ€æç¤º

                // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°é‡Œç¨‹ç¢‘ (å·²å®Œæˆå…³å¡æ•°æ˜¯5çš„å€æ•°)
                if (completedLevelsCount > 0 && completedLevelsCount % 5 === 0) {
                    prizeModalEl.classList.remove('hidden');
                    prizeResultEl.textContent = "ç‚¹å‡»â€œè½¬åŠ¨â€å¼€å§‹æŠ½å¥–ï¼";
                    spinButtonEl.disabled = false;
                    // é‡ç½®è½®ç›˜è§†è§‰æ•ˆæœ
                    prizeWheelEl.style.transition = 'none'; // ç§»é™¤è¿‡æ¸¡ä»¥ä¾¿ç«‹å³é‡ç½®
                    prizeWheelEl.style.transform = 'rotate(0deg)';
                    void prizeWheelEl.offsetWidth; // å¼ºåˆ¶æµè§ˆå™¨é‡æ–°è®¡ç®—æ ·å¼
                } else {
                    proceedToActualNextLevel(); // éé‡Œç¨‹ç¢‘ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€å…³
                }
            }

            // å®é™…æ‰§è¡Œè¿›å…¥ä¸‹ä¸€å…³å¡çš„æ“ä½œ
            function proceedToActualNextLevel() {
                prizeModalEl.classList.add('hidden'); // ç¡®ä¿æŠ½å¥–å¼¹çª—å·²å…³é—­

                currentLevelIndex++; // å¢åŠ å…³å¡ç´¢å¼•
                correctAnswersInLevel = 0; // é‡ç½®æœ¬å…³ç­”å¯¹é¢˜æ•°

                if (currentLevelIndex < levels.length) {
                    gameAreaEl.classList.remove('hidden');
                    generateProblem(); // ä¸ºæ–°å…³å¡å‡ºé¢˜
                } else {
                    // æ‰€æœ‰å…³å¡å·²å®Œæˆ (ç†è®ºä¸Šè¿™åº”è¯¥ç”±showLevelCompleteScreenå¤„ç†)
                    gameAreaEl.classList.add('hidden');
                    gameCompleteEl.classList.remove('hidden');
                }
            }

            // è½®ç›˜æŠ½å¥–é€»è¾‘
            function spinWheel() {
                spinButtonEl.disabled = true;
                prizeResultEl.textContent = "è½¬åŠ¨ä¸­...";

                const totalWheelSlots = wheelSlotPrizes.length; // åº”è¯¥æ˜¯10
                const winningSlotTrueIndex = Math.floor(Math.random() * totalWheelSlots);
                const winningPrize = wheelSlotPrizes[winningSlotTrueIndex];

                // è®¡ç®—æ—‹è½¬è§’åº¦ï¼Œè®©è½®ç›˜æŒ‡é’ˆæœ€ç»ˆæŒ‡å‘ä¸­å¥–åŒºåŸŸçš„ä¸­é—´
                // ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å‡è®¾æŒ‡é’ˆå›ºå®šåœ¨é¡¶éƒ¨ï¼Œè½®ç›˜æ—‹è½¬
                // æ¯ä¸ªæ§½ä½è§’åº¦ = 360 / totalWheelSlots
                // winningAngleæ˜¯è®©ç¬¬winningSlotTrueIndexä¸ªæ§½ä½çš„ä¸­å¿ƒå¯¹å‡†æŒ‡é’ˆçš„è§’åº¦
                // è§†è§‰ä¸Šï¼Œæˆ‘ä»¬è®©è½®ç›˜å¤šè½¬å‡ åœˆå†æ…¢æ…¢åœä¸‹
                const degreesPerSlot = 360 / totalWheelSlots;
                // ç›®æ ‡æ˜¯è®©ç¬¬ winningSlotTrueIndex çš„ä¸­å¿ƒå¯¹å‡†æŒ‡é’ˆï¼ˆ0åº¦ä½ç½®ï¼‰
                // æ—‹è½¬è§’åº¦åº”è¯¥æ˜¯è®©è¯¥æ§½ä½çš„èµ·å§‹ç‚¹è½¬åˆ°æŒ‡é’ˆåï¼Œå†åŠ åŠä¸ªæ§½ä½çš„è§’åº¦
                // ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©ä¸€ä¸ªåœæ­¢ç‚¹ï¼Œç„¶ååæ¨ä¸­å¥–é¡¹ç›®
                // æˆ–è€…ï¼Œæ›´ç›´æ¥ï¼šè®©è½®ç›˜è½¬åˆ°ç‰¹å®šè§’åº¦ï¼Œè¯¥è§’åº¦å¯¹åº”äºä¸­å¥–å¥–å“
                // å‡è®¾ç¬¬0ä¸ªæ§½ä½æ˜¯0-36åº¦ï¼Œç¬¬1ä¸ªæ˜¯36-72åº¦ç­‰ã€‚
                // æˆ‘ä»¬è¦è®©æŒ‡é’ˆï¼ˆå‡è®¾åœ¨0åº¦ï¼‰æŒ‡å‘ winningPrizeã€‚
                // è½®ç›˜éœ€è¦æ—‹è½¬çš„è§’åº¦ = (æ€»æ—‹è½¬åœˆæ•° * 360) - (ä¸­å¥–æ§½ä½çš„ä¸­å¿ƒè§’åº¦)
                // è¿™é‡Œçš„ (ä¸­å¥–æ§½ä½çš„ä¸­å¿ƒè§’åº¦) æ˜¯ç›¸å¯¹äºè½®ç›˜0åº¦ä½ç½®çš„ã€‚
                // æ¯”å¦‚ç¬¬ä¸€ä¸ªæ§½ä½ä¸­å¿ƒæ˜¯18åº¦ï¼Œç¬¬äºŒä¸ªæ˜¯54åº¦ã€‚
                // å¦‚æœæŒ‡é’ˆåœ¨é¡¶éƒ¨(0deg)ï¼Œè½®ç›˜è¦è½¬ -(winningSlotTrueIndex * degreesPerSlot + degreesPerSlot / 2)
                // å†åŠ ä¸Šå‡ åœˆå®Œæ•´çš„æ—‹è½¬
                const randomOffsetWithinSlot = (Math.random() - 0.5) * degreesPerSlot * 0.8; // åœ¨æ§½å†…å°å¹…éšæœºåç§»
                const targetRotation = (360 * (Math.floor(Math.random() * 3) + 3)) - (winningSlotTrueIndex * degreesPerSlot + degreesPerSlot / 2 + randomOffsetWithinSlot);


                prizeWheelEl.style.transition = 'transform 4s cubic-bezier(0.25, 0.1, 0.25, 1)';
                prizeWheelEl.style.transform = `rotate(${targetRotation}deg)`;

                setTimeout(() => {
                    prizeResultEl.innerHTML = `æ­å–œä½ è·å¾—: <span class="font-bold text-yellow-300">${winningPrize.text}</span>!`;
                    if (winningPrize.coins > 0) {
                        gameCoins += winningPrize.coins;
                        updateGameCoinsDisplay();
                    }
                    // spinButtonEl.disabled = false; // è½¬åŠ¨ä¸€æ¬¡åï¼ŒæŒ‰é’®ä¿æŒç¦ç”¨ï¼Œç›´åˆ°å…³é—­å¼¹çª—å†è¿›å…¥ä¸‹ä¸€å…³
                }, 4100); // æ¯”åŠ¨ç”»æ—¶é—´ç¨é•¿ä¸€ç‚¹
            }


            // é‡æ–°å¼€å§‹æ¸¸æˆ
            function restartGame() {
                currentLevelIndex = 0;
                correctAnswersInLevel = 0;
                completedLevelsCount = 0;
                gameCoins = 0; // é‡ç½®æ¸¸æˆå¸
                updateGameCoinsDisplay();
                gameCompleteEl.classList.add('hidden');
                levelCompleteEl.classList.add('hidden'); // ç¡®ä¿è¿™ä¸ªä¹Ÿéšè—
                prizeModalEl.classList.add('hidden'); // ç¡®ä¿æŠ½å¥–å¼¹çª—ä¹Ÿéšè—
                gameAreaEl.classList.remove('hidden');
                generateProblem();
            }

            // äº‹ä»¶ç›‘å¬
            submitButton.addEventListener('click', checkAnswer);
            answerInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') { checkAnswer(); }
            });
            nextLevelButton.addEventListener('click', goToNextLevel);
            restartButton.addEventListener('click', restartGame);
            spinButtonEl.addEventListener('click', spinWheel);
            closePrizeModalButtonEl.addEventListener('click', () => {
                // å…³é—­æŠ½å¥–å¼¹çª—åï¼Œæ‰çœŸæ­£è¿›å…¥ä¸‹ä¸€å…³å¡
                proceedToActualNextLevel();
            });

            // åˆå§‹åŒ–æ¸¸æˆ
            setupWheelSlots();
            updateGameCoinsDisplay();
            generateProblem(); // å¼€å§‹æ¸¸æˆç¬¬ä¸€å…³
        });
    </script>
</body>
</html>
ï¿½